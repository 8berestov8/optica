"use strict";(self["webpackChunklens_app"]=self["webpackChunklens_app"]||[]).push([[32],{2859:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(6252),a=i(3577);function s(e,t,i,s,l,r){const o=(0,n.up)("ion-label"),d=(0,n.up)("ion-segment-button"),m=(0,n.up)("ion-segment");return(0,n.wg)(),(0,n.j4)(m,{value:e.handlerValue,onIonChange:t[0]||(t[0]=t=>e.changeSegment(t)),class:"segment-container",ref:"segment"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{value:"left",class:"segment"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"label"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.titleLeft),1)])),_:1})])),_:1}),(0,n.Wm)(d,{value:"right",class:"segment"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"label"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.titleRight),1)])),_:1})])),_:1})])),_:1},8,["value"])}var l=i(3687);const r=(0,n.aZ)({name:"Segment",props:{value:{type:String,default:"left"},disabled:{type:Boolean,default:!1},titleLeft:{type:String,default:""},titleRight:{type:String,default:""}},emits:["change"],components:{IonSegment:l.cJ,IonSegmentButton:l.GO,IonLabel:l.Q$},computed:{handlerValue(){return this.value}},methods:{changeSegment(e){this.$emit("change",e.detail.value),this.disabled?this.$refs.segment.$el.value="left":this.$refs.segment.$el.value=this.handlerValue}}});var o=i(3744);const d=(0,o.Z)(r,[["render",s]]),m=d},2622:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var n=i(6252),a=i(3577);function s(e,t){const i=(0,n.up)("Header"),s=(0,n.up)("CardInfo"),l=(0,n.up)("ion-label"),r=(0,n.up)("ion-row"),o=(0,n.up)("ion-datetime"),d=(0,n.up)("TimeSelect"),m=(0,n.up)("Skeleton"),u=(0,n.up)("Segment"),c=(0,n.up)("Button"),h=(0,n.up)("ion-content"),g=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(g,{id:"recording"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{title:e.$t("RECORDING-DOCTOR"),contact:""},null,8,["title"]),(0,n.Wm)(h,{fullscreen:!0},{default:(0,n.w5)((()=>[e.previous_recording.date&&e.previous_recording.time?((0,n.wg)(),(0,n.j4)(s,{key:0,title:e.$t("RECORDING-DOCTOR-TITLE"),description:e.formatDate(e.previous_recording.date,"DD MMMM YYYY"),subdescription:e.previous_recording.time},null,8,["title","description","subdescription"])):(0,n.kq)("",!0),e.previous_recording.date&&e.previous_recording.time?((0,n.wg)(),(0,n.j4)(r,{key:1,class:"ion-justify-content-center ion-align-items-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"title-new"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t("NEW-RECORDING")),1)])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(r,{class:"ion-margin"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"ion-margin-bottom title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t("SELECT-DATE")),1)])),_:1}),(0,n.Wm)(o,{value:e.date,presentation:"date",locale:"ru-RU",size:"cover",ref:"calendar",min:e.minDate,"is-date-enabled":e.isWeekday,"first-day-of-week":1,onIonChange:e.selectDate},null,8,["value","min","is-date-enabled","onIonChange"])])),_:1}),e.date?((0,n.wg)(),(0,n.j4)(r,{key:2,class:"ion-margin time"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"ion-margin-bottom title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t("SELECT-TIME")),1)])),_:1}),e.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,onSelect:e.selectTime,time:e.time,reserved:e.reserved,times:e.times},null,8,["onSelect","time","reserved","times"])),e.loading?((0,n.wg)(),(0,n.j4)(m,{key:1})):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0),e.date&&e.time?((0,n.wg)(),(0,n.j4)(r,{key:3,class:"ion-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"ion-margin-bottom title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t("SELECT-SERVICE")),1)])),_:1}),(0,n.Wm)(u,{"title-left":e.$t("SPECTACLE-CORRECTION-SELECTION"),"title-right":e.$t("SELECTION-CONTACT-CORRECTION"),onChange:t[0]||(t[0]=t=>e.handlerSegment(t))},null,8,["title-left","title-right"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(c,{title:e.$t("CONTINUE"),id:"next-step",class:"button-next",onClick:e.next,disabled:e.handlerDisabledButton},null,8,["title","onClick","disabled"])])),_:1})])),_:1})}i(7658);var l=i(3687),r=i(4032);function o(e,t){const i=(0,n.up)("ion-col"),s=(0,n.up)("ion-row"),l=(0,n.up)("ion-grid");return(0,n.wg)(),(0,n.j4)(l,{id:"time-select-wrapper"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{class:"ion-justify-content-evenly"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.times,((t,s)=>((0,n.wg)(),(0,n.j4)(i,{class:(0,a.C_)(["time-item",[e.handlerClass(t),e.handlerReservedTime(t)]]),key:s,onClick:i=>e.selectTime(t)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.time),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})}const d=(0,n.aZ)({name:"TimeSelect",components:{IonGrid:l.jY,IonRow:l.Nd,IonCol:l.wI},props:{time:{type:Object,default:()=>{}},times:{type:Array,default:()=>[]},reserved:{type:Array,default:()=>[]}},emits:["select"],data(){return{}},computed:{handlerTime(){return this.time}},methods:{handlerClass(e){return this.handlerTime===e?"active":"selectable"},selectTime(e){this.handlerReserv(e)||this.$emit("select",e)},handlerReservedTime(e){return this.reserved.map((t=>t===e.time?"not-selectable":""))},handlerReserv(e){return this.reserved.find((t=>t===e.time))}}});var m=i(3744);const u=(0,m.Z)(d,[["render",o]]),c=u;var h=i(8596),g=i(2859),p=i(5536),f=i(2845),C=i(3907),E=i(2778),w=i(323);const T=(0,n.aZ)({name:"Recording",components:{CardInfo:f.Z,Skeleton:p.Z,Segment:g.Z,Button:h.Z,TimeSelect:c,IonContent:l.W2,IonPage:l._i,Header:r.Z,IonLabel:l.Q$,IonDatetime:l.x4,IonRow:l.Nd},data(){return{date:null,minDate:this.$moment(new Date).format("YYYY-MM-DD"),time:null,service:"Подбор очковой коррекции",disabled:!1,reserved:[],times:[],loading:!1}},computed:{...(0,C.Se)(["previous_recording"]),handlerDisabledButton(){return!(this.time&&this.date&&this.service)}},watch:{previous_recording(e,t){t&&(this.$refs.calendar.$el.reset(),this.time=null,this.date=null)}},methods:{...(0,C.OI)(["SET_DATE","SET_TIME","SET_SERVICE"]),formatDate:w.p,selectTime(e){this.time=e},async selectDate(e){this.loading=!0,this.time=null,this.date=e.target.value,e.target.value&&(this.reserved=await(0,E.x0)(this.$moment(this.date).format("YYYY-MM-DD")),this.loading=!1)},handlerSegment(e){this.service="left"===e?this.$t("SPECTACLE-CORRECTION-SELECTION"):this.$t("SELECTION-CONTACT-CORRECTION")},isWeekday(e){const t=new Date(e),i=t.getUTCDay();return 0!==i&&6!==i},next(){this.time&&this.date&&this.service&&(this.SET_DATE(this.$moment(this.date).format("YYYY-MM-DD")),this.SET_TIME(this.time),this.SET_SERVICE(this.service),this.$router.push({name:"CheckRecording"})),this.date||this.$toast([this.$t("SELECT-DATE")],4e3),this.time||this.$toast([this.$t("SELECT-TIME")],4e3)}},async mounted(){this.time=null,this.date=null,this.times=await(0,E.hK)()}}),v=(0,m.Z)(T,[["render",s]]),S=v}}]);
//# sourceMappingURL=32.b321e02a.js.map